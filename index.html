<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim Space | Secure Edition</title>
    <style>
        :root { --primary: #00ff41; --bg: #0d0d0d; --toolbar: #1a1a1a; --text: #ffffff; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; }

        /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #login-screen {
            position: fixed; inset: 0; background: black; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .login-box {
            background: #111; padding: 40px; border-radius: 15px; border: 1px solid var(--primary);
            text-align: center; box-shadow: 0 0 30px rgba(0,255,65,0.2); width: 300px;
        }
        .login-box input {
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 5px; border: 1px solid #333;
            background: #222; color: white; outline: none; box-sizing: border-box;
        }
        .login-btn {
            width: 100%; padding: 12px; background: var(--primary); color: black; font-weight: bold;
            border: none; border-radius: 5px; cursor: pointer; transition: 0.3s;
        }
        .login-btn:hover { background: #00cc33; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ */
        #splash {
            position: fixed; inset: 0; background: black; z-index: 9999;
            display: none; flex-direction: column; align-items: center; justify-content: center;
        }
        .logo { font-size: 3.5rem; color: var(--primary); text-shadow: 0 0 20px var(--primary); margin: 0; }
        .loader { width: 250px; height: 3px; background: #222; margin-top: 30px; border-radius: 5px; overflow: hidden; }
        .bar { width: 0%; height: 100%; background: var(--primary); transition: 0.3s; }

        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #app { display: none; height: 100vh; flex-direction: column; opacity: 0; transition: 1s; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar {
            background: var(--toolbar); padding: 10px; display: flex; flex-wrap: wrap;
            gap: 8px; border-bottom: 2px solid #333; align-items: center;
        }
        .tool-btn { background: #2a2a2a; border: 1px solid #444; color: white; padding: 8px 12px; border-radius: 4px; cursor: pointer; }
        .tool-btn:hover { background: var(--primary); color: black; }

        /* Ø§Ù„Ù…Ø­Ø±Ø± */
        .editor-frame { flex: 1; padding: 20px; overflow-y: auto; display: flex; justify-content: center; background: #121212; position: relative; }
        #editor {
            width: 100%; max-width: 900px; min-height: 100vh; background: white; color: black;
            padding: 50px; box-shadow: 0 0 30px rgba(0,0,0,0.5); outline: none; font-size: 18px; line-height: 1.6;
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ */
        #slash-menu {
            position: absolute; background: #1a1a1a; border: 1px solid var(--primary);
            border-radius: 8px; width: 250px; display: none; z-index: 1000; padding: 8px;
        }
        .slash-item { padding: 10px; cursor: pointer; border-radius: 5px; display: flex; align-items: center; gap: 10px; }
        .slash-item:hover { background: var(--primary); color: black; }

        footer { background: #0a0a0a; padding: 10px 30px; border-top: 1px solid #333; display: flex; justify-content: space-between; font-size: 0.85rem; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-box">
            <h2 style="color:var(--primary)">HATIM SPACE</h2>
            <p style="color:#666; font-size: 0.8rem;">Login to Secure Space</p>
            <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button class="login-btn" onclick="checkLogin()">Ø¯Ø®ÙˆÙ„</button>
            <p id="error-msg" style="color:red; font-size:0.8rem; margin-top:10px; display:none;">Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©!</p>
        </div>
    </div>

    <div id="splash">
        <h1 class="logo">HATIM SPACE</h1>
        <div style="color:#555; margin-top:10px;">BY HATIM AIT IJJOU</div>
        <div class="loader"><div class="bar" id="bar"></div></div>
    </div>

    <div id="app">
        <div class="toolbar">
            <button class="tool-btn" onclick="exec('bold')">B</button>
            <button class="tool-btn" onclick="exec('italic')">I</button>
            <button class="tool-btn" onclick="exec('underline')">U</button>
            <select onchange="exec('fontSize', this.value)">
                <option value="3">Ø¹Ø§Ø¯ÙŠ</option>
                <option value="5">ÙƒØ¨ÙŠØ±</option>
                <option value="7">Ø¶Ø®Ù…</option>
            </select>
            <button class="tool-btn" onclick="saveFile()" style="background:#28a745">ğŸ“¥ Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„</button>
            <button class="tool-btn" onclick="logout()" style="background:#dc3545">ğŸšª Ø®Ø±ÙˆØ¬</button>
        </div>

        <div class="editor-frame">
            <div id="editor" contenteditable="true" spellcheck="false">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø­Ø§ØªÙ…... Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… /</div>
            <div id="slash-menu">
                <div class="slash-item" onclick="insert('todo')">âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©</div>
                <div class="slash-item" onclick="insert('project')">ğŸš€ Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹</div>
                <div class="slash-item" onclick="saveFile()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù</div>
            </div>
        </div>

        <footer>
            <div>Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬: <span style="color:var(--primary)">Hatim Ait Ijjou</span></div>
            <div>Hatim Space &copy; 2026</div>
        </footer>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        function checkLogin() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            if(user === "hatim" && pass === "1234") {
                document.getElementById('login-screen').style.display = 'none';
                startSplash();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        function startSplash() {
            const splash = document.getElementById('splash');
            splash.style.display = 'flex';
            let p = 0;
            const b = setInterval(() => {
                p += 20; document.getElementById('bar').style.width = p + "%";
                if(p >= 100) {
                    clearInterval(b);
                    splash.style.opacity = '0';
                    setTimeout(() => {
                        splash.style.display = 'none';
                        document.getElementById('app').style.display = 'flex';
                        setTimeout(() => document.getElementById('app').style.opacity = '1', 100);
                    }, 800);
                }
            }, 100);
        }

        function exec(cmd, val = null) { document.execCommand(cmd, false, val); }

        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if (sel.rangeCount > 0) {
                const range = sel.getRangeAt(0);
                const text = range.startContainer.textContent.substring(0, range.startOffset);
                if (text.endsWith('/')) {
                    const rect = range.getBoundingClientRect();
                    menu.style.display = 'block';
                    menu.style.top = (rect.bottom + window.scrollY - 100) + 'px';
                    menu.style.left = rect.left + 'px';
                } else { menu.style.display = 'none'; }
            }
        });

        function insert(type) {
            editor.focus(); document.execCommand('delete', false, null);
            if(type === 'todo') document.execCommand('insertHTML', false, '<div><input type="checkbox"> Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©...</div><br>');
            if(type === 'project') document.execCommand('insertHTML', false, '<div style="border:1px solid #00ff41; padding:10px">ğŸš€ Ù…Ø´Ø±ÙˆØ¹ Ø­Ø§ØªÙ…: ...</div><br>');
            menu.style.display = 'none';
        }

        function saveFile() {
            const blob = new Blob([editor.innerText], {type: "text/plain"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = "Hatim_Space.txt"; a.click();
        }

        function logout() { location.reload(); }
        document.addEventListener('click', (e) => { if(e.target.id !== 'editor') menu.style.display = 'none'; });
    </script>
</body>
</html>
